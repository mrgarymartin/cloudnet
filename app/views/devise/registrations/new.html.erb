<% title "Register" %>

<div class="container">
  <div class="pure-g">
    <div class="pure-u-1">
      <%= devise_error_messages! %>
    </div>
  </div>
  <div class="pure-g">
    <div class="pure-u-1">
      <%#= render partial: "shared/order_progress" if @location%>
    </div>
  </div>
  <div class="pure-g">
    <div class="pure-u-1-4">
      <%= render partial: "devise/shared/order_summary" if @location%>
    </div>
    <div class=<%= @location ? "pure-u-3-4" : "pure-u-1-2" %>>
      <div id="jg-registration-widget" class="pure-g">  
        <%= form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => { :class => "pure-u-1 form-devise", :role => "form" }) do |f| %>

          <header class="session-logo">
            <%= link_to ENV['BRAND_NAME'], root_path, { class: "pure-u-1-1", id: 'logoLarge'} %>
          </header>
          <div class="pure-g">
            <dl>
              <dt class="jg-icon icon-user pure-u-1-8"></dt>
              <dd class="pure-u-7-8">
                <% auto = !@user.full_name.present? %>
                <%= f.text_field :full_name, :autofocus => auto, :class => "form-control", :placeholder => "Full Name" %>
              </dd>
            </dl>

            <dl>
              <dt class="jg-icon icon-email pure-u-1-8"></dt>
              <dd class="pure-u-7-8">
                <% auto = @user.full_name.present? && !@user.email.present? %>
                <%= f.email_field :email, :autofocus => auto, :class => "form-control", :placeholder => "Email" %>
              </dd>
            </dl>

            <dl>
              <dt class="jg-icon icon-locked pure-u-1-8"></dt>
              <dd class="pure-u-7-8">
                <% auto = @user.full_name.present? && @user.email.present? %>
                <%= f.password_field :password, :autofocus => auto, :class => "form-control", :placeholder => "Password" %>
              </dd>
            </dl>

            <dl>
              <dt class="jg-icon icon-locked pure-u-1-8"></dt>
              <dd class="pure-u-7-8">
                <%= f.password_field :password_confirmation, :class => "form-control", :placeholder => "Password (confirm)" %>
              </dd>
            </dl>

            <dl>
              <dd id="session-action" class="pure-u-1-1"><%= f.button "Sign up", {id: 'session-button', :class => "btn btn-lg btn-primary btn-block jg-submit-button"} %></dd>
            </dl>
          </div>
        <% end %>
      </div>
    </div>  
  </div>
</div>

<%= render "devise/shared/links" %>

<script>ga('send', 'event', 'Page', 'View', 'Registration Page');</script>